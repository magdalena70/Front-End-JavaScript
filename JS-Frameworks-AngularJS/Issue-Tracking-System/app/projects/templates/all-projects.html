<!--error message-->
<div class="row text-center" ng-if="!isAdmin()" ng-include="'app/common/partial/admin-warning-msg.html'"></div>
<!--end error message-->
<!--all projects-->
<div class="row" ng-if="isAdmin()">
	<div class="col-md-12">
		<h2>All Projects Total Count: <span class="blue">{{totalCount}}</span></h2>
		<p class="text-center"><a href="#/projects/add">Add New Project</a></p>
		<!--using custom directive 'hideElement'-->
		<button ng-if="!projects.length || projects.length > 3" 
			class="btn btn-success" 
			ng-click="getAllProjects(3, 1)"><!--First: I get 3 projects on a page and find Projects TotalCount-->
				Get All Projects
		</button>
		<button hide-element ng-if="projects.length && projects.length == 3"
			class="btn btn-warning" 
			ng-click="getAllProjects(totalCount, 1)"><!--Then: Use Projects TotalCount to get all projects on a page-->
				Search Projects By Filters
		</button>
		<!--projects filters-->
		<div id="projects-filters" ng-show="projects.length > 10">
			<div class="col-md-3">
				<div class="form-group">
					<label for="searchAllProjectsByName">Search project by Project Name:</label>
					<div class="inner-addon left-addon">
						<i class="fa fa-search" aria-hidden="true"></i>
						<input type="search" ng-model="searchAllProjects.Name" 
							id="searchAllProjectsByName"
							placeholder="Project Name"
							class="form-control">
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="form-group">
					<label for="searchAllProjectsByLeader">Search project by Leader Username:</label>
					<div class="inner-addon left-addon">
						<i class="fa fa-search" aria-hidden="true"></i>
						<input type="search" ng-model="searchAllProjects.Lead.Username" 
							id="searchAllProjectsByLeader"
							placeholder="Leader Username"
							class="form-control">
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="form-group">
					<label for="searchAllProjectsByLabel">Search project by Labels:</label>
					<div class="inner-addon left-addon">
						<i class="fa fa-search" aria-hidden="true"></i>
						<input type="search" ng-model="searchAllProjects.Labels.Name" 
							id="searchAllProjectsByLabel"
							placeholder="Label Name"
							class="form-control">
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="form-group">
					<label for="searchAllProjectsByPriority">Search project by Priorities:</label>
					<div class="inner-addon left-addon">
						<i class="fa fa-search" aria-hidden="true"></i>
						<input type="search" ng-model="searchAllProjects.Priorities.Name" 
							id="searchAllProjectsByPriority"
							placeholder="Priority Name"
							class="form-control">
					</div>
				</div>
			</div>
		</div>
		<!--end projects filters-->
		<!-- all projects view selected by filters without pagination-->
		<div ng-show="projects.length > 3 || searchAllProjects">
			<table class="table table-hover table-bordered">
				<thead>
					  <tr>
							<th width="7%">Details</th>
							<th width="15%">Name</th>
							<th width="28%">Description</th>
							<th width="20%">Leader</th>
							<th width="15%">Labels</th>
							<th width="15%">Priorities</th>
					  </tr>
				</thead>
				<tbody>
					<tr ng-repeat="project in projects | orderBy: 'Name' | filter: searchAllProjects">
							<td width="7%">
								<a href="#/projects/{{project.Id}}" class="blue">
									<i class="fa fa-info-circle" aria-hidden="true"></i>
								</a>
							</td>
							<td width="15%">
								<a href="#/projects/{{project.Id}}">{{project.Name}}</a>
							</td>
							<td width="28%">{{project.Description}}</td>
							<td width="20%">
								<a href="#/admin/users/{{project.Lead.Username}}/info">{{project.Lead.Username}}</a>
							</td>
							<td width="15%">
								<p>Count: {{project.Labels.length}}</p>
								<div class="inner-addon left-addon">
									<i class="fa fa-tags" aria-hidden="true"></i>
									<select class="style-select">
										<option></option>
										<option ng-repeat="label in project.Labels">{{label.Name}}</option>
									</select>
								</div>
							</td>
							<td width="15%">
								<p>Count: {{project.Priorities.length}}</p>
								<div class="inner-addon left-addon">
									<i class="fa fa-exclamation-circle" aria-hidden="true"></i>
									<select class="style-select">
										<option></option>
										<option ng-repeat="priority in project.Priorities">{{priority.Name}}</option>
									</select>
								</div>
							</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!--end filtered projects view-->
		
		<!--all projects view with pagination without filters-->
		<div ng-show="projects.length == 3 && !searchAllProjects">
			<!--all projects pagination-->
			<div class="col-md-12">
				<div class="col-md-4 col-md-offset-4 text-center" id="projectsPagination">
					<span>
						<button ng-show="allProjectsCurPage > 1" 
						  ng-click="getAllProjects(3, allProjectsCurPage-1)">
							<i class="fa fa-angle-double-left" aria-hidden="true"></i>
						</button>
					</span>
					<span>Page {{allProjectsCurPage}} of {{ allProjectsNumberOfPages() }}</span>
					<span>
						<button ng-show="allProjectsCurPage < allProjectsNumberOfPages()" 
						  ng-click="getAllProjects(3, allProjectsCurPage+1)">
							<i class="fa fa-angle-double-right" aria-hidden="true"></i>
						</button>
					</span>
				</div>
			</div >
			<!--end pagination-->
			<table class="table table-hover table-bordered">
				<thead>
					<tr>
						<th width="7%">Details</th>
						<th width="15%">Name</th>
						<th width="28%">Description</th>
						<th width="20%">Leader</th>
						<th width="15%">Labels</th>
						<th width="15%">Priorities</th>
					 </tr>
				</thead>
				<tbody>
					<tr ng-repeat="project in projects | orderBy: 'Name'">
						<td width="7%">
							<a href="#/projects/{{project.Id}}" class="blue">
								<i class="fa fa-info-circle" aria-hidden="true"></i>
							</a>
						</td>
						<td width="15%">
							<a href="#/projects/{{project.Id}}">{{project.Name}}</a>
						</td>
						<td width="28%">{{project.Description}}</td>
						<td width="20%">
							<a href="#/admin/users/{{project.Lead.Username}}/info">{{project.Lead.Username}}</a>
						</td>
						<td width="15%">
							<p>Count: {{project.Labels.length}}</p>
							<div class="inner-addon left-addon">
								<i class="fa fa-tags" aria-hidden="true"></i>
								<select class="style-select">
									<option></option>
									<option ng-repeat="label in project.Labels">{{label.Name}}</option>
								</select>
							</div>
						</td>
						<td width="15%">
							<p>Count: {{project.Priorities.length}}</p>
							<div class="inner-addon left-addon">
								<i class="fa fa-exclamation-circle" aria-hidden="true"></i>
								<select class="style-select">
									<option></option>
									<option ng-repeat="priority in project.Priorities">{{priority.Name}}</option>
								</select>
							</div>
						</td>
					 </tr>
				</tbody>
			</table>
		</div>
		<!--end all projects view with pagination without filters-->
	</div>
</div>